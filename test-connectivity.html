<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Test</title>
    <style>
        body { 
            background: #000; 
            color: #fff; 
            font: 18px Arial, sans-serif; 
            padding: 20px; 
            line-height: 1.6;
        }
        .status { 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 8px; 
            font-weight: bold; 
        }
        .success { background: #0f4c0f; color: #0f0; }
        .error { background: #4c0f0f; color: #f00; }
        .info { background: #0f0f4c; color: #0ff; }
        .big { font-size: 24px; text-align: center; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="big">🌐 Network Connectivity Test</div>
    
    <div class="status success">✅ HTML Page Loading Successfully</div>
    <div class="status info">📱 Device: <span id="device">Loading...</span></div>
    <div class="status info">🌍 URL: <span id="url">Loading...</span></div>
    <div class="status info">📶 Connection: <span id="connection">Testing...</span></div>
    <div class="status info">🕐 Time: <span id="time">Loading...</span></div>
    
    <div id="results"></div>

    <script>
        // Basic device info
        document.getElementById('device').textContent = navigator.userAgent.includes('Mobile') ? 'Mobile' : 'Desktop';
        document.getElementById('url').textContent = window.location.href;
        document.getElementById('time').textContent = new Date().toLocaleString();
        
        // Test server connectivity
        async function testConnectivity() {
            const results = document.getElementById('results');
            const connection = document.getElementById('connection');
            
            try {
                const response = await fetch('/test-mobile');
                const data = await response.json();
                
                connection.textContent = '✅ Connected to Server';
                results.innerHTML = 
                    '<div class="status success">✅ Server Connection Working</div>' +
                    '<div class="status info">📋 Server Response: ' + JSON.stringify(data, null, 2) + '</div>';
                
                // Log success to console
                console.log('✅ Server connection successful:', data);
                
            } catch (error) {
                connection.textContent = '❌ Server Connection Failed';
                results.innerHTML = 
                    '<div class="status error">❌ Cannot Connect to Server</div>' +
                    '<div class="status error">Error: ' + error.message + '</div>' +
                    '<div class="status info">This means your device cannot reach the Replit server.</div>' +
                    '<div class="status info">Possible causes: Network firewall, HTTPS/HTTP mismatch, or server down.</div>';
                
                // Log error to console
                console.error('❌ Server connection failed:', error);
            }
        }
        
        // Run test when page loads
        testConnectivity();
        
        // Also log to console
        console.log('🌐 Network test page loaded');
        console.log('📱 User Agent:', navigator.userAgent);
        console.log('🌍 Current URL:', window.location.href);
        console.log('🔒 Protocol:', window.location.protocol);
        console.log('📡 Host:', window.location.host);
    </script>
</body>
</html>