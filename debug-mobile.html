<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BingeBoard Mobile Debug</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #000;
            color: #fff;
            font-family: Arial, sans-serif;
        }
        .test-box {
            background: #1a1a1a;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            border: 1px solid #333;
        }
        .success { border-color: #10b981; }
        .error { border-color: #ef4444; }
        .warning { border-color: #f59e0b; }
        button {
            background: #14b8a6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 5px;
            cursor: pointer;
        }
        #console-output {
            background: #111;
            padding: 10px;
            border-radius: 5px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>üì± BingeBoard Mobile Debug</h1>
    
    <div class="test-box">
        <h3>üîç JavaScript Runtime Test</h3>
        <p>If you can see this page, JavaScript is working!</p>
        <button onclick="testJavaScript()">Test JavaScript</button>
        <div id="js-test-result"></div>
    </div>

    <div class="test-box">
        <h3>üåê Network Test</h3>
        <button onclick="testAPI()">Test API Connection</button>
        <div id="api-test-result"></div>
    </div>

    <div class="test-box">
        <h3>üì± Device Information</h3>
        <div id="device-info"></div>
    </div>

    <div class="test-box">
        <h3>üöÄ React Test</h3>
        <button onclick="testReact()">Test React Loading</button>
        <div id="react-test-result"></div>
    </div>

    <div class="test-box">
        <h3>üìã Console Output</h3>
        <div id="console-output"></div>
    </div>

    <script>
        // Capture console logs
        const originalLog = console.log;
        const originalError = console.error;
        const consoleOutput = document.getElementById('console-output');
        
        function addToConsole(type, message) {
            const timestamp = new Date().toLocaleTimeString();
            consoleOutput.textContent += `[${timestamp}] ${type}: ${message}\n`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole('LOG', args.join(' '));
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole('ERROR', args.join(' '));
        };
        
        // Test JavaScript
        function testJavaScript() {
            const result = document.getElementById('js-test-result');
            try {
                const testObj = { test: 'working' };
                const testArray = [1, 2, 3];
                const testFunction = () => 'success';
                
                result.innerHTML = `
                    <div class="success">
                        ‚úÖ JavaScript is working!<br>
                        Object: ${JSON.stringify(testObj)}<br>
                        Array: ${testArray}<br>
                        Function: ${testFunction()}
                    </div>
                `;
                console.log('‚úÖ JavaScript test passed');
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå JavaScript error: ${error.message}</div>`;
                console.error('‚ùå JavaScript test failed:', error);
            }
        }
        
        // Test API connection
        async function testAPI() {
            const result = document.getElementById('api-test-result');
            result.innerHTML = '<div class="warning">‚è≥ Testing API connection...</div>';
            
            try {
                const response = await fetch('/api/health');
                const data = await response.json();
                
                if (response.ok) {
                    result.innerHTML = `
                        <div class="success">
                            ‚úÖ API connection working!<br>
                            Status: ${data.status}<br>
                            Server: ${data.server}<br>
                            Mobile: ${data.mobile}
                        </div>
                    `;
                    console.log('‚úÖ API test passed:', data);
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå API error: ${error.message}</div>`;
                console.error('‚ùå API test failed:', error);
            }
        }
        
        // Test React
        async function testReact() {
            const result = document.getElementById('react-test-result');
            result.innerHTML = '<div class="warning">‚è≥ Testing React loading...</div>';
            
            try {
                // Try to load React main file
                const response = await fetch('/src/main.tsx');
                
                if (response.ok) {
                    result.innerHTML = `
                        <div class="success">
                            ‚úÖ React main.tsx accessible!<br>
                            Status: ${response.status}<br>
                            Content-Type: ${response.headers.get('content-type')}
                        </div>
                    `;
                    console.log('‚úÖ React file test passed');
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                result.innerHTML = `<div class="error">‚ùå React loading error: ${error.message}</div>`;
                console.error('‚ùå React test failed:', error);
            }
        }
        
        // Display device info
        function displayDeviceInfo() {
            const deviceInfo = document.getElementById('device-info');
            const userAgent = navigator.userAgent;
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|Mobile/i.test(userAgent);
            
            deviceInfo.innerHTML = `
                <strong>User Agent:</strong> ${userAgent}<br>
                <strong>Mobile Device:</strong> ${isMobile ? 'Yes' : 'No'}<br>
                <strong>Screen:</strong> ${screen.width}x${screen.height}<br>
                <strong>Viewport:</strong> ${window.innerWidth}x${window.innerHeight}<br>
                <strong>URL:</strong> ${window.location.href}
            `;
            
            console.log('Device info displayed');
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Mobile debug page loaded');
            displayDeviceInfo();
            
            // Auto-run tests
            setTimeout(() => {
                testJavaScript();
                testAPI();
            }, 1000);
        });
        
        // Catch any unhandled errors
        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
            addToConsole('ERROR', `Global error: ${e.error?.message || e.message}`);
        });
        
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled promise rejection:', e.reason);
            addToConsole('ERROR', `Promise rejection: ${e.reason}`);
        });
    </script>
</body>
</html>