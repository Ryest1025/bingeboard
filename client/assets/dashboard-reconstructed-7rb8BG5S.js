import{j as e,C as N,a as b,P as y,S as u,T as q,b as S,B as x,c as O,d as H,e as M,f as K,g as G,r as _,u as C,n as R,N as J,h as V,i as Y}from"./index-H-WiZrgv.js";const I={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"},U=s=>s>=9?"text-yellow-300":s>=8?"text-yellow-400":s>=7?"text-yellow-500":"text-slate-400",Q=s=>{const t=s,a=[...s.streamingPlatforms||[],...t.streaming||[],...s.streaming_platforms||[]],l=new Set;return a.map((n,o)=>({provider_id:n.provider_id??o+1,provider_name:n.provider_name||n.name||`Platform ${o+1}`,logo_path:n.logo_path||null})).filter(n=>{const o=`${n.provider_id}-${n.provider_name}`;return l.has(o)?!1:(l.add(o),!0)})};function X(){return e.jsx(N,{className:"bg-slate-900 overflow-hidden",children:e.jsx(b,{className:"p-0",children:e.jsxs("div",{className:"relative h-80 animate-pulse",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-700"}),e.jsxs("div",{className:"relative z-10 p-8 h-full flex flex-col justify-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"bg-slate-600 h-5 w-24"})}),e.jsx("div",{className:"bg-slate-600 h-10 w-64 mb-4"}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"bg-slate-600 h-4 w-20"}),e.jsx("div",{className:"bg-slate-600 h-4 w-12"}),e.jsx("div",{className:"bg-slate-600 h-4 w-16"})]}),e.jsx("div",{className:"bg-slate-600 h-12 w-32"})]})]})})})}const Z=({show:s,layout:t="vertical",actions:a={watchNow:!0,trailer:!0,addToList:!0},showStreamingLogos:l=!0,onAddToWatchlist:n,onWatchTrailer:o,onCardClick:g,onShareContent:p,onWatchNow:v,size:r="md",genreMap:j,variant:m})=>{var E;if(!s)return t==="spotlight"?e.jsx(X,{}):null;const c=s.title||s.name||"Unknown Title",f=s.release_date||s.first_air_date,k=f?new Date(f).getFullYear():"Unknown",w=s.vote_average?s.vote_average.toFixed(1):"N/A",F=f&&new Date(f)>new Date,h=s.poster_path?`https://image.tmdb.org/t/p/w342${s.poster_path}`:null,P=s.backdrop_path?`https://image.tmdb.org/t/p/w1280${s.backdrop_path}`:h,d=Q(s),A=((E=s.genre_ids)==null?void 0:E.slice(0,2))||[],z=()=>g==null?void 0:g(s),T=async i=>{if(i.stopPropagation(),n)n(s);else try{(await fetch("/api/watchlist/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,title:c,poster_path:s.poster_path,media_type:s.media_type||"tv",vote_average:s.vote_average,overview:s.overview}),credentials:"include"})).ok?console.log(`Added "${c}" to watchlist!`):console.error("Failed to add to watchlist")}catch(W){console.error("Error adding to watchlist:",W)}},$=i=>{i.stopPropagation(),o==null||o(s)},D=i=>{i.stopPropagation(),v?v(s):console.log(`Watch Now: ${c}`)},L=i=>{i.stopPropagation(),p==null||p(s)};return t==="spotlight"?e.jsx(N,{className:"bg-slate-900 overflow-hidden group hover:shadow-2xl transition-all duration-300",children:e.jsx(b,{className:"p-0",children:e.jsxs("div",{className:"relative h-[360px] overflow-hidden group rounded-lg",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-800 to-slate-600 z-0"}),P&&e.jsx("img",{src:P,alt:c,className:"absolute inset-0 w-full h-full object-cover z-0 transition-transform duration-700 group-hover:scale-105",onError:i=>{s.backdrop_path&&s.poster_path&&!i.currentTarget.src.includes(s.poster_path)?i.currentTarget.src=`https://image.tmdb.org/t/p/w780${s.poster_path}`:i.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 z-10"}),e.jsxs("div",{className:"relative z-20 flex h-full items-center p-8 gap-6",onClick:z,children:[h&&e.jsx("img",{src:h,alt:`${c} Poster`,className:"w-28 md:w-36 h-auto object-contain rounded-lg shadow-lg flex-shrink-0 z-20"}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:c}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4 text-sm text-gray-300",children:[e.jsx("span",{children:s.media_type==="tv"?"TV Series":"Movie"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:k}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["â­ ",w]})]}),e.jsx("p",{className:"text-gray-200 mb-6 max-w-2xl text-base leading-relaxed",children:s.overview||"No description available."}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-4",children:[a.watchNow&&e.jsxs("button",{onClick:D,className:"bg-white text-black px-6 py-3 font-medium flex items-center gap-2 hover:bg-gray-200 hover:scale-105 transition-all duration-200 rounded shadow-lg hover:shadow-xl",children:[e.jsx(y,{className:"w-5 h-5"}),d.length>0?e.jsxs("span",{className:"flex items-center gap-2",children:["Watch Now On",e.jsx(u,{providers:[d[0]],size:"sm",maxDisplayed:1})]}):"Watch Now"]}),a.trailer&&e.jsx(q,{show:{id:s.id,tmdbId:s.id,title:c},variant:"secondary",className:"bg-gray-700/80 text-white px-6 py-3 font-medium hover:bg-gray-600 hover:scale-105 transition-all duration-200 rounded shadow-lg hover:shadow-xl backdrop-blur-sm border-none",showLabel:!0}),a.addToList&&e.jsxs("button",{onClick:T,className:"bg-gray-700/80 text-white px-6 py-3 font-medium flex items-center gap-2 hover:bg-gray-600 hover:scale-105 transition-all duration-200 rounded shadow-lg hover:shadow-xl backdrop-blur-sm",children:[e.jsx(S,{className:"w-5 h-5"}),"Add to List"]})]})]})]})]})})}):t==="horizontal"?e.jsx(N,{className:"group overflow-hidden cursor-pointer border-slate-700 bg-slate-800/50 hover:bg-slate-700/50 hover:border-slate-600 transition-all duration-300 hover:shadow-lg",onClick:z,children:e.jsx(b,{className:"p-0",children:e.jsxs("div",{className:"flex items-center",children:[h&&e.jsx("img",{src:h,alt:c,className:"w-24 h-36 object-cover rounded-l-lg flex-shrink-0",loading:"lazy"}),e.jsxs("div",{className:"p-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2 truncate",children:c}),e.jsxs("div",{className:"text-sm text-gray-400 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:k}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:U(parseFloat(w)),children:["â­ ",w]}),F&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"text-yellow-400",children:"Upcoming"})]})]}),l&&d.length>0&&e.jsx("div",{className:"mb-3",children:e.jsx(u,{providers:d,size:"sm",maxDisplayed:1})}),e.jsxs("div",{className:"flex gap-2",children:[a.watchNow&&e.jsxs(x,{size:"sm",onClick:D,className:"bg-white text-black hover:bg-gray-200",children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),d.length>0?e.jsxs("span",{className:"flex items-center gap-1",children:["Watch On",e.jsx(u,{providers:[d[0]],size:"sm",maxDisplayed:1})]}):"Watch"]}),a.addToList&&e.jsxs(x,{size:"sm",variant:"ghost",onClick:T,className:"text-slate-300 hover:text-white hover:bg-slate-700",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Add"]}),a.trailer&&e.jsxs(x,{size:"sm",variant:"ghost",onClick:$,className:"text-slate-300 hover:text-white hover:bg-slate-700",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),"Trailer"]})]})]})]})})}):e.jsx(N,{className:"group overflow-hidden cursor-pointer border-slate-700 bg-slate-800/50 hover:bg-slate-700/50 hover:border-slate-600 transition-all duration-300 hover:shadow-lg h-full flex flex-col",onClick:z,children:e.jsxs(b,{className:"p-0 h-full flex flex-col",children:[e.jsxs("div",{className:"relative aspect-[2/3] overflow-hidden",children:[h&&e.jsx("img",{src:h,alt:`Poster for ${c}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxs("div",{className:"absolute bottom-2 left-2 right-2",children:[s.vote_average&&e.jsxs("div",{className:`flex items-center gap-1 mb-2 ${U(s.vote_average)}`,children:[e.jsx(H,{className:"w-3 h-3 fill-current"}),e.jsx("span",{className:"text-xs font-medium text-white",children:s.vote_average.toFixed(1)})]}),F&&e.jsxs("div",{className:"flex items-center gap-1 text-yellow-400 mb-1",children:[e.jsx(M,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"Upcoming"})]})]})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxs(x,{size:"sm",className:"bg-white/90 text-black hover:bg-white",children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),d.length>0?e.jsxs("span",{className:"flex items-center gap-1",children:["Watch On",e.jsx(u,{providers:[d[0]],size:"sm",maxDisplayed:1})]}):"Watch"]})})]}),e.jsxs("div",{className:"p-3 flex-1 flex flex-col",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 leading-tight text-white",children:c}),e.jsxs("div",{className:"text-xs text-gray-400",children:[k," â€¢ â­ ",w]}),A.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:A.map(i=>e.jsx(K,{variant:"outline",className:"text-xs px-1.5 py-0.5 border-slate-600 text-slate-300",children:(j==null?void 0:j[i])||I[i]||`Genre ${i}`},i))}),l&&d.length>0&&e.jsx("div",{className:"mb-1",children:e.jsx(u,{providers:d,size:"sm",maxDisplayed:1})}),(m==="detailed"||t==="vertical")&&s.overview&&e.jsx("p",{className:"text-xs text-slate-400 line-clamp-2 leading-relaxed",children:s.overview})]}),e.jsx("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-slate-700/50",children:e.jsxs("div",{className:"flex gap-1",children:[a.addToList&&e.jsxs(x,{size:"sm",variant:"ghost",onClick:T,className:"text-xs px-2 py-1 h-auto text-slate-300 hover:text-white hover:bg-slate-700",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),"Add"]}),a.trailer&&e.jsxs(x,{size:"sm",variant:"ghost",onClick:$,className:"text-xs px-2 py-1 h-auto text-slate-300 hover:text-white hover:bg-slate-700",children:[e.jsx(O,{className:"w-3 h-3 mr-1"}),"Trailer"]}),a.share&&p&&e.jsxs(x,{size:"sm",variant:"ghost",onClick:L,className:"text-xs px-2 py-1 h-auto text-slate-300 hover:text-white hover:bg-slate-700",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),"Share"]})]})})]})]})})},B=({title:s,children:t,action:a})=>e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:s}),a&&e.jsx("div",{className:"flex items-center gap-2",children:a})]}),t]}),ee=({shows:s})=>{const[t,a]=_.useState(0),l=s==null?void 0:s[t];return l?e.jsxs("div",{className:"relative h-96 bg-slate-800 rounded-lg overflow-hidden",children:[l.backdrop_path&&e.jsx("img",{src:`https://image.tmdb.org/t/p/w1280${l.backdrop_path}`,alt:l.title||l.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/70 via-black/40 to-transparent",children:e.jsxs("div",{className:"absolute bottom-8 left-8 max-w-lg",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:l.title||l.name}),l.overview&&e.jsx("p",{className:"text-lg text-gray-200 mb-6 line-clamp-3",children:l.overview}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(x,{size:"lg",className:"bg-white text-black hover:bg-gray-200",children:[e.jsx(y,{className:"w-5 h-5 mr-2"}),"Watch Now"]}),e.jsxs(x,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/10",children:[e.jsx(Y,{className:"w-5 h-5 mr-2"}),"Add to Watchlist"]})]})]})})]}):e.jsx("div",{className:"relative h-96 bg-slate-800 rounded-lg",children:e.jsx(V,{className:"w-full h-full"})})},se={genre:["Comedy","Drama","Action","Thriller"],network:["Netflix","HBO","Prime","Disney+"],year:["2025","2024","2023","2022"]},te=({shows:s})=>s!=null&&s.length?e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:s.map(t=>e.jsx(N,{className:"min-w-64 bg-slate-800 border-slate-700",children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex gap-3",children:[t.poster_path&&e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${t.poster_path}`,alt:t.title,className:"w-16 h-24 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:t.title}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${t.progress||30}%`}})}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[t.progress||30,"% complete"]})]})]})})},t.id))}):null,le=()=>{var v;const[s,t]=_.useState({}),{data:a}=C({queryKey:["trending"],queryFn:async()=>{const r=await fetch("/api/trending");if(!r.ok)throw new Error("Failed to fetch trending");return r.json()}}),{data:l}=C({queryKey:["personalized"],queryFn:async()=>{const r=await fetch("/api/recommendations");if(!r.ok)throw new Error("Failed to fetch recommendations");return r.json()}}),{data:n}=C({queryKey:["continue"],queryFn:async()=>{const r=await fetch("/api/user/continue-watching");if(!r.ok)throw new Error("Failed to fetch continue watching");return r.json()}}),o=_.useMemo(()=>R((a==null?void 0:a.results)||[]),[a]),g=_.useMemo(()=>R((l==null?void 0:l.results)||[]),[l]),p=async r=>{await fetch("/api/watchlist/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})};return e.jsx("div",{className:"min-h-screen bg-slate-900",children:e.jsxs("div",{className:"px-4 md:px-8 lg:px-16 space-y-12 py-8",children:[e.jsx(J,{}),e.jsxs("div",{className:"bg-purple-600 text-white p-4 rounded-lg text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ðŸš€ RECONSTRUCTED DASHBOARD (9/20 Style)"}),e.jsx("p",{className:"text-sm",children:"This is the test version with hero carousel and dropdown filters"})]}),e.jsx(ee,{shows:o.slice(0,5)}),e.jsxs(B,{title:"For You",children:[e.jsx("div",{className:"flex gap-2 mb-4",children:Object.entries(se).map(([r,j])=>e.jsxs("select",{className:"bg-slate-800 border border-slate-700 text-white p-2 rounded",onChange:m=>t(c=>({...c,[r]:m.target.value})),children:[e.jsx("option",{value:"",children:r}),j.map(m=>e.jsx("option",{value:m,children:m},m))]},r))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:g.map(r=>e.jsx(Z,{show:r,onAddToWatchlist:p},r.id))})]}),((v=n==null?void 0:n.items)==null?void 0:v.length)>0&&e.jsx(B,{title:"Continue Watching",children:e.jsx(te,{shows:n.items})})]})})};export{B as Section,le as default};
