import{o as e,v as _,i as F,O as P,q as H,a as h,S as k,t as R,w as B,Q as v,Z as j,N as g,f as K,A as S,r as q,b as Q,c as Z,$ as I,F as J}from"./index-BPk3_MNU.js";const V={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"},E=s=>s>=9?"text-yellow-300":s>=8?"text-yellow-400":s>=7?"text-yellow-500":"text-slate-400",Y=s=>{const a=s,r=[...s.streamingPlatforms||[],...a.streaming||[],...s.streaming_platforms||[]],t=new Set;return r.map((o,n)=>({provider_id:o.provider_id??n+1,provider_name:o.provider_name||o.name||`Platform ${n+1}`,logo_path:o.logo_path||null})).filter(o=>{const n=`${o.provider_id}-${o.provider_name}`;return t.has(n)?!1:(t.add(n),!0)})};function G(){return e.jsx(v,{className:"bg-slate-900 overflow-hidden",children:e.jsx(j,{className:"p-0",children:e.jsxs("div",{className:"relative h-80 animate-pulse",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-700"}),e.jsxs("div",{className:"relative z-10 p-8 h-full flex flex-col justify-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"bg-slate-600 h-5 w-24"})}),e.jsx("div",{className:"bg-slate-600 h-10 w-64 mb-4"}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"bg-slate-600 h-4 w-20"}),e.jsx("div",{className:"bg-slate-600 h-4 w-12"}),e.jsx("div",{className:"bg-slate-600 h-4 w-16"})]}),e.jsx("div",{className:"bg-slate-600 h-12 w-32"})]})]})})})}const X=({show:s,layout:a="vertical",actions:r={watchNow:!0,trailer:!0,addToList:!0},showStreamingLogos:t=!0,onAddToWatchlist:o,onWatchTrailer:n,onCardClick:u,onShareContent:p,onWatchNow:w,size:l="md",genreMap:N,variant:x})=>{var b;if(!s)return a==="spotlight"?e.jsx(G,{}):null;const c=s.title||s.name||"Unknown Title",f=s.release_date||s.first_air_date,z=f?new Date(f).getFullYear():"Unknown",y=s.vote_average?s.vote_average.toFixed(1):"N/A",$=f&&new Date(f)>new Date,m=s.poster_path?`https://image.tmdb.org/t/p/w342${s.poster_path}`:null,A=s.backdrop_path?`https://image.tmdb.org/t/p/w1280${s.backdrop_path}`:m,d=Y(s),W=((b=s.genre_ids)==null?void 0:b.slice(0,2))||[],T=()=>u==null?void 0:u(s),C=async i=>{if(i.stopPropagation(),o)o(s);else try{(await fetch("/api/watchlist/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,title:c,poster_path:s.poster_path,media_type:s.media_type||"tv",vote_average:s.vote_average,overview:s.overview}),credentials:"include"})).ok?console.log(`Added "${c}" to watchlist!`):console.error("Failed to add to watchlist")}catch(U){console.error("Error adding to watchlist:",U)}},D=i=>{i.stopPropagation(),n==null||n(s)},O=i=>{i.stopPropagation(),w?w(s):console.log(`Watch Now: ${c}`)},M=i=>{i.stopPropagation(),p==null||p(s)};return a==="spotlight"?e.jsx(v,{className:"bg-slate-900 overflow-hidden group hover:shadow-2xl transition-all duration-300",children:e.jsx(j,{className:"p-0",children:e.jsxs("div",{className:"relative h-[360px] overflow-hidden group rounded-lg",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-800 to-slate-600 z-0"}),A&&e.jsx("img",{src:A,alt:c,className:"absolute inset-0 w-full h-full object-cover z-0 transition-transform duration-700 group-hover:scale-105",onError:i=>{s.backdrop_path&&s.poster_path&&!i.currentTarget.src.includes(s.poster_path)?i.currentTarget.src=`https://image.tmdb.org/t/p/w780${s.poster_path}`:i.currentTarget.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 z-10"}),e.jsxs("div",{className:"relative z-20 flex h-full items-center p-8 gap-6",onClick:T,children:[m&&e.jsx("img",{src:m,alt:`${c} Poster`,className:"w-28 md:w-36 h-auto object-contain rounded-lg shadow-lg flex-shrink-0 z-20"}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:c}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4 text-sm text-gray-300",children:[e.jsx("span",{children:s.media_type==="tv"?"TV Series":"Movie"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:z}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["â­ ",y]})]}),e.jsx("p",{className:"text-gray-200 mb-6 max-w-2xl text-base leading-relaxed",children:s.overview||"No description available."}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-4",children:[r.watchNow&&e.jsxs("button",{onClick:O,className:"bg-white text-black px-6 py-3 font-medium flex items-center gap-2 hover:bg-gray-200 hover:scale-105 transition-all duration-200 rounded shadow-lg hover:shadow-xl",children:[e.jsx(k,{className:"w-5 h-5"}),d.length>0?e.jsxs("span",{className:"flex items-center gap-2",children:["Watch Now On",e.jsx(g,{providers:[d[0]],size:"sm",maxDisplayed:1})]}):"Watch Now"]}),r.trailer&&e.jsx(K,{show:{id:s.id,tmdbId:s.id,title:c},variant:"secondary",className:"bg-gray-700/80 text-white px-6 py-3 font-medium hover:bg-gray-600 hover:scale-105 transition-all duration-200 rounded shadow-lg hover:shadow-xl backdrop-blur-sm border-none",showLabel:!0}),r.addToList&&e.jsxs("button",{onClick:C,className:"bg-gray-700/80 text-white px-6 py-3 font-medium flex items-center gap-2 hover:bg-gray-600 hover:scale-105 transition-all duration-200 rounded shadow-lg hover:shadow-xl backdrop-blur-sm",children:[e.jsx(S,{className:"w-5 h-5"}),"Add to List"]})]})]})]})]})})}):a==="horizontal"?e.jsx(v,{className:"group overflow-hidden cursor-pointer border-slate-700 bg-slate-800/50 hover:bg-slate-700/50 hover:border-slate-600 transition-all duration-300 hover:shadow-lg",onClick:T,children:e.jsx(j,{className:"p-0",children:e.jsxs("div",{className:"flex items-center",children:[m&&e.jsx("img",{src:m,alt:c,className:"w-24 h-36 object-cover rounded-l-lg flex-shrink-0",loading:"lazy"}),e.jsxs("div",{className:"p-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2 truncate",children:c}),e.jsxs("div",{className:"text-sm text-gray-400 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:z}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:E(parseFloat(y)),children:["â­ ",y]}),$&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"text-yellow-400",children:"Upcoming"})]})]}),t&&d.length>0&&e.jsx("div",{className:"mb-3",children:e.jsx(g,{providers:d,size:"sm",maxDisplayed:1})}),e.jsxs("div",{className:"flex gap-2",children:[r.watchNow&&e.jsxs(h,{size:"sm",onClick:O,className:"bg-white text-black hover:bg-gray-200",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),d.length>0?e.jsxs("span",{className:"flex items-center gap-1",children:["Watch On",e.jsx(g,{providers:[d[0]],size:"sm",maxDisplayed:1})]}):"Watch"]}),r.addToList&&e.jsxs(h,{size:"sm",variant:"ghost",onClick:C,className:"text-slate-300 hover:text-white hover:bg-slate-700",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Add"]}),r.trailer&&e.jsxs(h,{size:"sm",variant:"ghost",onClick:D,className:"text-slate-300 hover:text-white hover:bg-slate-700",children:[e.jsx(q,{className:"w-4 h-4 mr-1"}),"Trailer"]})]})]})]})})}):e.jsx(v,{className:"group overflow-hidden cursor-pointer border-slate-700 bg-slate-800/50 hover:bg-slate-700/50 hover:border-slate-600 transition-all duration-300 hover:shadow-lg h-full flex flex-col",onClick:T,children:e.jsxs(j,{className:"p-0 h-full flex flex-col",children:[e.jsxs("div",{className:"relative aspect-[2/3] overflow-hidden",children:[m&&e.jsx("img",{src:m,alt:`Poster for ${c}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxs("div",{className:"absolute bottom-2 left-2 right-2",children:[s.vote_average&&e.jsxs("div",{className:`flex items-center gap-1 mb-2 ${E(s.vote_average)}`,children:[e.jsx(Q,{className:"w-3 h-3 fill-current"}),e.jsx("span",{className:"text-xs font-medium text-white",children:s.vote_average.toFixed(1)})]}),$&&e.jsxs("div",{className:"flex items-center gap-1 text-yellow-400 mb-1",children:[e.jsx(Z,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"Upcoming"})]})]})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxs(h,{size:"sm",className:"bg-white/90 text-black hover:bg-white",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),d.length>0?e.jsxs("span",{className:"flex items-center gap-1",children:["Watch On",e.jsx(g,{providers:[d[0]],size:"sm",maxDisplayed:1})]}):"Watch"]})})]}),e.jsxs("div",{className:"p-3 flex-1 flex flex-col",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 leading-tight text-white",children:c}),e.jsxs("div",{className:"text-xs text-gray-400",children:[z," â€¢ â­ ",y]}),W.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:W.map(i=>e.jsx(I,{variant:"outline",className:"text-xs px-1.5 py-0.5 border-slate-600 text-slate-300",children:(N==null?void 0:N[i])||V[i]||`Genre ${i}`},i))}),t&&d.length>0&&e.jsx("div",{className:"mb-1",children:e.jsx(g,{providers:d,size:"sm",maxDisplayed:1})}),(x==="detailed"||a==="vertical")&&s.overview&&e.jsx("p",{className:"text-xs text-slate-400 line-clamp-2 leading-relaxed",children:s.overview})]}),e.jsx("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-slate-700/50",children:e.jsxs("div",{className:"flex gap-1",children:[r.addToList&&e.jsxs(h,{size:"sm",variant:"ghost",onClick:C,className:"text-xs px-2 py-1 h-auto text-slate-300 hover:text-white hover:bg-slate-700",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),"Add"]}),r.trailer&&e.jsxs(h,{size:"sm",variant:"ghost",onClick:D,className:"text-xs px-2 py-1 h-auto text-slate-300 hover:text-white hover:bg-slate-700",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"Trailer"]}),r.share&&p&&e.jsxs(h,{size:"sm",variant:"ghost",onClick:M,className:"text-xs px-2 py-1 h-auto text-slate-300 hover:text-white hover:bg-slate-700",children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),"Share"]})]})})]})]})})},L=({title:s,children:a,action:r})=>e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:s}),r&&e.jsx("div",{className:"flex items-center gap-2",children:r})]}),a]}),ee=({shows:s})=>{const[a,r]=_.useState(0),t=s==null?void 0:s[a];return t?e.jsxs("div",{className:"relative h-96 bg-slate-800 rounded-lg overflow-hidden",children:[t.backdrop_path&&e.jsx("img",{src:`https://image.tmdb.org/t/p/w1280${t.backdrop_path}`,alt:t.title||t.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/70 via-black/40 to-transparent",children:e.jsxs("div",{className:"absolute bottom-8 left-8 max-w-lg",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:t.title||t.name}),t.overview&&e.jsx("p",{className:"text-lg text-gray-200 mb-6 line-clamp-3",children:t.overview}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(h,{size:"lg",className:"bg-white text-black hover:bg-gray-200",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Watch Now"]}),e.jsxs(h,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/10",children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),"Add to Watchlist"]})]})]})})]}):e.jsx("div",{className:"relative h-96 bg-slate-800 rounded-lg",children:e.jsx(B,{className:"w-full h-full"})})},se={genre:["Comedy","Drama","Action","Thriller"],network:["Netflix","HBO","Prime","Disney+"],year:["2025","2024","2023","2022"]},ae=({shows:s})=>s!=null&&s.length?e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:s.map(a=>e.jsx(v,{className:"min-w-64 bg-slate-800 border-slate-700",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex gap-3",children:[a.poster_path&&e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${a.poster_path}`,alt:a.title,className:"w-16 h-24 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:a.title}),e.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${a.progress||30}%`}})}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[a.progress||30,"% complete"]})]})]})})},a.id))}):null,le=()=>{var s;const[a,r]=_.useState({}),{data:t}=F({queryKey:["trending"],queryFn:async()=>{const l=await fetch("/api/trending");if(!l.ok)throw new Error("Failed to fetch trending");return l.json()}}),{data:o}=F({queryKey:["personalized"],queryFn:async()=>{const l=await fetch("/api/recommendations");if(!l.ok)throw new Error("Failed to fetch recommendations");return l.json()}}),{data:n}=F({queryKey:["continue"],queryFn:async()=>{const l=await fetch("/api/user/continue-watching");if(!l.ok)throw new Error("Failed to fetch continue watching");return l.json()}}),u=_.useMemo(()=>P((t==null?void 0:t.results)||[]),[t]),p=_.useMemo(()=>P((o==null?void 0:o.results)||[]),[o]),w=async l=>{await fetch("/api/watchlist/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})};return e.jsx("div",{className:"min-h-screen bg-slate-900",children:e.jsxs("div",{className:"px-4 md:px-8 lg:px-16 space-y-12 py-8",children:[e.jsx(H,{}),e.jsxs("div",{className:"bg-purple-600 text-white p-4 rounded-lg text-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"ðŸš€ RECONSTRUCTED DASHBOARD (9/20 Style)"}),e.jsx("p",{className:"text-sm",children:"This is the test version with hero carousel and dropdown filters"})]}),e.jsx(ee,{shows:u.slice(0,5)}),e.jsxs(L,{title:"For You",children:[e.jsx("div",{className:"flex gap-2 mb-4",children:Object.entries(se).map(([l,N])=>e.jsxs("select",{className:"bg-slate-800 border border-slate-700 text-white p-2 rounded",onChange:x=>r(b=>({...b,[l]:x.target.value})),children:[e.jsx("option",{value:"",children:l}),N.map(x=>e.jsx("option",{value:x,children:x},x))]},l))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:p.map(l=>e.jsx(X,{show:l,onAddToWatchlist:w},l.id))})]}),((s=n==null?void 0:n.items)==null?void 0:s.length)>0&&e.jsx(L,{title:"Continue Watching",children:e.jsx(ae,{shows:n.items})})]})})};export{L as Section,le as default};
