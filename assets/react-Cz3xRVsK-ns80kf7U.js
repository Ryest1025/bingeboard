import{K as Y}from"./index-BPk3_MNU.js";var Z=Object.defineProperty,D=e=>{throw TypeError(e)},tt=(e,t,s)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,N=(e,t,s)=>tt(e,typeof t!="symbol"?t+"":t,s),I=(e,t,s)=>t.has(e)||D("Cannot "+s),o=(e,t,s)=>(I(e,t,"read from private field"),s?s.call(e):t.get(e)),d=(e,t,s)=>t.has(e)?D("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),n=(e,t,s,i)=>(I(e,t,"write to private field"),t.set(e,s),s),et=(e,t,s)=>(I(e,t,"access private method"),s);const st="https://open.spotify.com",it=/open\.spotify\.com\/(\w+)\/(\w+)/i,nt="https://open.spotify.com/embed-podcast/iframe-api/v1",rt="SpotifyIframeApi",at="onSpotifyIframeApiReady";function G(e,t={}){const s={src:J(e,t),scrolling:"no",frameborder:0,width:"100%",height:"100%",allow:"accelerometer; fullscreen; autoplay; encrypted-media; gyroscope; picture-in-picture"};return`
    <style>
      :host {
        display: inline-block;
        min-width: 160px;
        min-height: 80px;
        position: relative;
      }
      iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      :host(:not([controls])) {
        display: none !important;
      }
    </style>
    <iframe${ot(s)}></iframe>
  `}function J(e,t){var s,i,c;if(!e.src)return;const h=e.src.match(it),w=h&&h[1],E=h&&h[2],l={t:(s=t.config)==null?void 0:s.startAt,theme:((i=t.config)==null?void 0:i.theme)==="dark"?"0":null},W=(c=t.config)!=null&&c.preferVideo?"/video":"";return`${st}/embed/${w}/${E}${W}?${lt(l)}`}var L,S,R,p,f,m,v,k,C,H,x,Q;class A extends(globalThis.HTMLElement??class{}){constructor(){super(),d(this,x),N(this,"loadComplete",new q),d(this,L),d(this,S),d(this,R),d(this,p,!1),d(this,f,!1),d(this,m,!0),d(this,v,0),d(this,k,NaN),d(this,C,!1),d(this,H,null),et(this,x,Q).call(this,"config")}async load(){var t,s,i;if(o(this,L))return;o(this,S)&&(this.loadComplete=new q),n(this,S,!0),await n(this,L,Promise.resolve()),n(this,L,null),n(this,p,!1),n(this,f,!1),n(this,v,0),n(this,k,NaN),n(this,C,!1),this.dispatchEvent(new Event("emptied"));let c=this.api;if(this.api=null,!this.src)return;this.dispatchEvent(new Event("loadstart"));const h={t:(t=this.config)==null?void 0:t.startAt,theme:((s=this.config)==null?void 0:s.theme)==="dark"?"0":null,preferVideo:(i=this.config)==null?void 0:i.preferVideo};if(o(this,R))this.api=c,this.api.iframeElement.src=J(K(this.attributes),this);else{n(this,R,!0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=G(K(this.attributes),this));let w=this.shadowRoot.querySelector("iframe");const E=await ut(nt,rt,at);this.api=await new Promise(l=>E.createController(w,h,l)),this.api.iframeElement=w,this.api.addListener("ready",()=>{this.dispatchEvent(new Event("loadedmetadata")),this.dispatchEvent(new Event("durationchange")),this.dispatchEvent(new Event("volumechange"))}),this.api.addListener("playback_update",l=>{if(o(this,f)&&o(this,m)&&(l.data.isBuffering||!l.data.isPaused)){n(this,f,!1),this.currentTime=1;return}if(l.data.duration/1e3!==o(this,k)&&(n(this,f,!1),n(this,k,l.data.duration/1e3),this.dispatchEvent(new Event("durationchange"))),l.data.position/1e3!==o(this,v)&&(n(this,C,!1),n(this,f,!1),n(this,v,l.data.position/1e3),this.dispatchEvent(new Event("timeupdate"))),!o(this,p)&&!o(this,m)&&l.data.isPaused){n(this,m,!0),this.dispatchEvent(new Event("pause"));return}if(o(this,m)&&(l.data.isBuffering||!l.data.isPaused)){n(this,m,!1),this.dispatchEvent(new Event("play")),n(this,p,l.data.isBuffering),o(this,p)?this.dispatchEvent(new Event("waiting")):this.dispatchEvent(new Event("playing"));return}if(o(this,p)&&!l.data.isPaused){n(this,p,!1),this.dispatchEvent(new Event("playing"));return}if(!this.paused&&!this.seeking&&!o(this,f)&&Math.ceil(this.currentTime)>=this.duration){if(n(this,f,!0),this.loop){this.currentTime=1;return}this.continuous||(this.pause(),this.dispatchEvent(new Event("ended")));return}})}this.loadComplete.resolve(),await this.loadComplete}async attributeChangedCallback(t,s,i){if(s!==i)switch(t){case"src":{this.load();return}}}async play(){var t;return n(this,m,!1),n(this,p,!0),this.dispatchEvent(new Event("play")),await this.loadComplete,(t=this.api)==null?void 0:t.resume()}async pause(){var t;return await this.loadComplete,(t=this.api)==null?void 0:t.pause()}get config(){return o(this,H)}set config(t){n(this,H,t)}get paused(){return o(this,m)??!0}get muted(){return!1}set muted(t){}get volume(){return 1}set volume(t){}get ended(){return Math.ceil(this.currentTime)>=this.duration}get seeking(){return o(this,C)}get loop(){return this.hasAttribute("loop")}set loop(t){this.loop!=t&&this.toggleAttribute("loop",!!t)}get currentTime(){return o(this,v)}set currentTime(t){if(this.currentTime==t)return;n(this,C,!0);let s=o(this,v);n(this,v,t),this.dispatchEvent(new Event("timeupdate")),n(this,v,s),this.loadComplete.then(()=>{var i;(i=this.api)==null||i.seek(t)})}get duration(){return o(this,k)}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",`${t}`)}}L=new WeakMap,S=new WeakMap,R=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,v=new WeakMap,k=new WeakMap,C=new WeakMap,H=new WeakMap,x=new WeakSet,Q=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){const t=this[e];delete this[e],this[e]=t}},N(A,"getTemplateHTML",G),N(A,"shadowRootOptions",{mode:"open"}),N(A,"observedAttributes",["controls","loop","src"]);function ot(e){let t="";for(const s in e){const i=e[s];i===""?t+=` ${s}`:t+=` ${s}="${i}"`}return t}function lt(e){return String(new URLSearchParams(ht(e)))}function ht(e){let t={};for(let s in e){let i=e[s];i===!0||i===""?t[s]=1:i===!1?t[s]=0:i!=null&&(t[s]=i)}return t}function K(e){let t={};for(let s of e)t[s.name]=s.value;return t}const j={};async function ut(e,t,s){return j[e]?j[e]:self[t]?Promise.resolve(self[t]):j[e]=new Promise(function(i,c){const h=document.createElement("script");h.src=e;const w=E=>i(E);self[s]=w,h.onload=()=>!s,h.onerror=c,document.head.append(h)})}class q extends Promise{constructor(t=()=>{}){let s,i;super((c,h)=>{t(c,h),s=c,i=h}),this.resolve=s,this.reject=i}}globalThis.customElements&&!globalThis.customElements.get("spotify-audio")&&globalThis.customElements.define("spotify-audio",A);var ct=A,dt=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),pt={className:"class",htmlFor:"for"};function X(e){return e.toLowerCase()}function U(e){if(typeof e=="boolean")return e?"":void 0;if(typeof e!="function"&&!(typeof e=="object"&&e!==null))return e}function ft({react:e,tagName:t,elementClass:s,events:i,displayName:c,defaultProps:h,toAttributeName:w=X,toAttributeValue:E=U}){const l=Number.parseInt(e.version)>=19,W=e.forwardRef((V,M)=>{var B,_;const g=e.useRef(null),$=e.useRef(new Map),O={},F={},b={},P={};for(const[r,a]of Object.entries(V)){if(dt.has(r)){b[r]=a;continue}const u=w(pt[r]??r);if(r in s.prototype&&!(r in(((B=globalThis.HTMLElement)==null?void 0:B.prototype)??{}))&&!((_=s.observedAttributes)!=null&&_.some(T=>T===u))){P[r]=a;continue}if(r.startsWith("on")){O[r]=a;continue}const y=E(a);if(u&&y!=null&&(F[u]=String(y),l||(b[u]=y)),u&&l){const T=U(a);y!==T?b[u]=y:b[u]=a}}if(typeof window<"u"){for(const r in O){const a=O[r],u=r.endsWith("Capture"),y=((i==null?void 0:i[r])??r.slice(2).toLowerCase()).slice(0,u?-7:void 0);e.useLayoutEffect(()=>{const T=g==null?void 0:g.current;if(!(!T||typeof a!="function"))return T.addEventListener(y,a,u),()=>{T.removeEventListener(y,a,u)}},[g==null?void 0:g.current,a])}e.useLayoutEffect(()=>{if(g.current===null)return;const r=new Map;for(const a in P)z(g.current,a,P[a]),$.current.delete(a),r.set(a,P[a]);for(const[a,u]of $.current)z(g.current,a,void 0);$.current=r})}if(typeof window>"u"&&s!=null&&s.getTemplateHTML&&s!=null&&s.shadowRootOptions){const{mode:r,delegatesFocus:a}=s.shadowRootOptions,u=e.createElement("template",{shadowrootmode:r,shadowrootdelegatesfocus:a,dangerouslySetInnerHTML:{__html:s.getTemplateHTML(F,V)}});b.children=[u,b.children]}return e.createElement(t,{...h,...b,ref:e.useCallback(r=>{g.current=r,typeof M=="function"?M(r):M!==null&&(M.current=r)},[M])})});return W.displayName=c??s.name,W}function z(e,t,s){var i;e[t]=s,s==null&&t in(((i=globalThis.HTMLElement)==null?void 0:i.prototype)??{})&&e.removeAttribute(t)}var vt=ft({react:Y,tagName:"spotify-audio",elementClass:ct,toAttributeName(e){return e==="muted"?"":e==="defaultMuted"?"muted":X(e)}});export{vt as default};
