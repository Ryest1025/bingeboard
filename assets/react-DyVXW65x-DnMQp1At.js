import{K as ot}from"./index-BPk3_MNU.js";var at=Object.defineProperty,K=t=>{throw TypeError(t)},rt=(t,s,e)=>s in t?at(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,D=(t,s,e)=>rt(t,typeof s!="symbol"?s+"":s,e),$=(t,s,e)=>s.has(t)||K("Cannot "+e),l=(t,s,e)=>($(t,s,"read from private field"),e?e.call(t):s.get(t)),u=(t,s,e)=>s.has(t)?K("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,e),a=(t,s,e,n)=>($(t,s,"write to private field"),s.set(t,e),e),h=(t,s,e)=>($(t,s,"access private method"),e);const lt="https://www.tiktok.com/player/v1",ut=/tiktok\.com\/(?:@[^/]+\/video\/)?(\d+)(?:\/([\w-]+))?/,f={INIT:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3},ct={[f.INIT]:"emptied",[f.PAUSED]:"pause",[f.ENDED]:"ended",[f.PLAYING]:"play",[f.BUFFERING]:"waiting"};function Y(t,s={}){const e={src:_(t,s),frameborder:0,width:"100%",height:"100%",allow:"accelerometer; autoplay; fullscreen; encrypted-media; gyroscope; picture-in-picture"};return s.config&&(e["data-config"]=JSON.stringify(s.config)),`
    <style>
      :host {
        display:inline-block;
        min-width: 300px;
        min-height: 150px;
        position: relative;
      }
      iframe {
        position:absolute;
        top:0;
        left:0;
        width:100%;
        height:100%;
        border:0;
      }
    </style>
    <iframe ${ft(e)} title="TikTok video"></iframe>
  `}function _(t,s={}){if(!t.src)return;const e=t.src.match(ut),n=e&&e[1],g={controls:t.controls===""?null:0,autoplay:t.autoplay,muted:t.muted,loop:t.loop,rel:0,...s.config};return`${lt}/${n}?${pt(g)}`}var E,T,w,M,C,L,y,A,N,W,c,b,z,Q,X,Z;const x=class tt extends(globalThis.HTMLElement??class{}){constructor(){super(),u(this,c),D(this,"loadComplete",new V),u(this,E),u(this,T),u(this,w,!1),u(this,M,0),u(this,C,!0),u(this,L,null),u(this,y,100),u(this,A,0),u(this,N),u(this,W,s=>{const e=s.data;if(e!=null&&e["x-tiktok-player"])switch(e.type){case"onPlayerReady":this.loadComplete.resolve();break;case"onStateChange":{a(this,C,[f.INIT,f.PAUSED,f.ENDED].includes(e.value));const n=ct[e.value];n&&this.dispatchEvent(new Event(n));break}case"onCurrentTime":a(this,M,e.value.currentTime),a(this,A,e.value.duration),this.dispatchEvent(new Event("durationchange")),this.dispatchEvent(new Event("timeupdate"));break;case"onVolumeChange":a(this,y,e.value),this.dispatchEvent(new Event("volumechange"));break;case"onMute":a(this,w,!!e.value),a(this,y,e.value?0:l(this,y)),this.dispatchEvent(new Event("volumechange"));break;case"onError":this.dispatchEvent(new Event("error"));break;default:console.warn("Unhandled TikTok player message:",e);break}}),h(this,c,Z).call(this,"config")}static get observedAttributes(){return["src","controls","loop","autoplay","muted"]}async load(){if(l(this,E))return;this.shadowRoot||this.attachShadow(tt.shadowRootOptions);const s=!l(this,T);if(l(this,T)&&(this.loadComplete=new V),a(this,T,!0),await a(this,E,Promise.resolve()),a(this,E,null),a(this,M,0),a(this,w,!1),a(this,C,!0),!this.src){this.shadowRoot.innerHTML="",globalThis.removeEventListener("message",l(this,W));return}let e=this.shadowRoot.querySelector("iframe");const n=ht(this.attributes);s&&e&&a(this,L,JSON.parse(e.getAttribute("data-config")||"{}")),(!(e!=null&&e.src)||e.src!==_(n,this))&&(this.shadowRoot.innerHTML=Y(n,this),e=this.shadowRoot.querySelector("iframe")),a(this,N,e),globalThis.addEventListener("message",l(this,W))}async attributeChangedCallback(s,e,n){if(e!==n)switch(s){case"muted":{await this.loadComplete,this.muted=n!=null;break}case"autoplay":case"controls":case"loop":case"src":{this.load();return}}}get config(){return l(this,L)}set config(s){a(this,L,s)}async play(){await this.loadComplete,h(this,c,b).call(this,"play")}async pause(){await this.loadComplete,h(this,c,b).call(this,"pause")}get volume(){return l(this,y)/100}set volume(s){console.warn("Volume control is not supported for TikTok videos.")}get currentTime(){return l(this,M)}set currentTime(s){h(this,c,z).call(this,s)}get muted(){return l(this,w)}set muted(s){a(this,w,s),s?h(this,c,Q).call(this):h(this,c,X).call(this)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(s){this.toggleAttribute("muted",!!s)}get paused(){return l(this,C)}get duration(){return l(this,A)}get src(){return this.getAttribute("src")}set src(s){this.setAttribute("src",s??"")}};E=new WeakMap,T=new WeakMap,w=new WeakMap,M=new WeakMap,C=new WeakMap,L=new WeakMap,y=new WeakMap,A=new WeakMap,N=new WeakMap,W=new WeakMap,c=new WeakSet,b=function(t,s){var e;if(!((e=l(this,N))!=null&&e.contentWindow))return;const n={"x-tiktok-player":!0,type:t,...s!==void 0?{value:s}:{}};l(this,N).contentWindow.postMessage(n,"*")},z=async function(t){await this.loadComplete,h(this,c,b).call(this,"seekTo",Number(t))},Q=async function(){await this.loadComplete,h(this,c,b).call(this,"mute")},X=async function(){await this.loadComplete,h(this,c,b).call(this,"unMute")},Z=function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const s=this[t];delete this[t],this[t]=s}},D(x,"getTemplateHTML",Y),D(x,"shadowRootOptions",{mode:"open"});let et=x;class V extends Promise{constructor(s=()=>{}){let e,n;super((g,R)=>{s(g,R),e=g,n=R}),this.resolve=e,this.reject=n}}function ht(t){let s={};for(let e of t)s[e.name]=e.value;return s}function dt(t){let s={};for(let e in t){let n=t[e];n===!0||n===""?s[e]=1:n===!1?s[e]=0:n!=null&&(s[e]=n)}return s}function pt(t){return String(new URLSearchParams(dt(t)))}function ft(t){let s="";for(const e in t){const n=t[e];n===""?s+=` ${O(e)}`:s+=` ${O(e)}="${O(`${n}`)}"`}return s}function O(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#x60;")}globalThis.customElements&&!globalThis.customElements.get("tiktok-video")&&globalThis.customElements.define("tiktok-video",et);var mt=et,vt=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),gt={className:"class",htmlFor:"for"};function st(t){return t.toLowerCase()}function B(t){if(typeof t=="boolean")return t?"":void 0;if(typeof t!="function"&&!(typeof t=="object"&&t!==null))return t}function wt({react:t,tagName:s,elementClass:e,events:n,displayName:g,defaultProps:R,toAttributeName:nt=st,toAttributeValue:it=B}){const P=Number.parseInt(t.version)>=19,U=t.forwardRef((F,k)=>{var j,G;const d=t.useRef(null),I=t.useRef(new Map),H={},q={},m={},S={};for(const[i,o]of Object.entries(F)){if(vt.has(i)){m[i]=o;continue}const r=nt(gt[i]??i);if(i in e.prototype&&!(i in(((j=globalThis.HTMLElement)==null?void 0:j.prototype)??{}))&&!((G=e.observedAttributes)!=null&&G.some(v=>v===r))){S[i]=o;continue}if(i.startsWith("on")){H[i]=o;continue}const p=it(o);if(r&&p!=null&&(q[r]=String(p),P||(m[r]=p)),r&&P){const v=B(o);p!==v?m[r]=p:m[r]=o}}if(typeof window<"u"){for(const i in H){const o=H[i],r=i.endsWith("Capture"),p=((n==null?void 0:n[i])??i.slice(2).toLowerCase()).slice(0,r?-7:void 0);t.useLayoutEffect(()=>{const v=d==null?void 0:d.current;if(!(!v||typeof o!="function"))return v.addEventListener(p,o,r),()=>{v.removeEventListener(p,o,r)}},[d==null?void 0:d.current,o])}t.useLayoutEffect(()=>{if(d.current===null)return;const i=new Map;for(const o in S)J(d.current,o,S[o]),I.current.delete(o),i.set(o,S[o]);for(const[o,r]of I.current)J(d.current,o,void 0);I.current=i})}if(typeof window>"u"&&e!=null&&e.getTemplateHTML&&e!=null&&e.shadowRootOptions){const{mode:i,delegatesFocus:o}=e.shadowRootOptions,r=t.createElement("template",{shadowrootmode:i,shadowrootdelegatesfocus:o,dangerouslySetInnerHTML:{__html:e.getTemplateHTML(q,F)}});m.children=[r,m.children]}return t.createElement(s,{...R,...m,ref:t.useCallback(i=>{d.current=i,typeof k=="function"?k(i):k!==null&&(k.current=i)},[k])})});return U.displayName=g??e.name,U}function J(t,s,e){var n;t[s]=e,e==null&&s in(((n=globalThis.HTMLElement)==null?void 0:n.prototype)??{})&&t.removeAttribute(s)}var bt=wt({react:ot,tagName:"tiktok-video",elementClass:mt,toAttributeName(t){return t==="muted"?"":t==="defaultMuted"?"muted":st(t)}});export{bt as default};
