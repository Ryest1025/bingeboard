import{K as at}from"./index-BPk3_MNU.js";var rt=Object.defineProperty,et=e=>{throw TypeError(e)},lt=(e,t,s)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,H=(e,t,s)=>lt(e,typeof t!="symbol"?t+"":t,s),J=(e,t,s)=>t.has(e)||et("Cannot "+s),n=(e,t,s)=>(J(e,t,"read from private field"),s?s.call(e):t.get(e)),c=(e,t,s)=>t.has(e)?et("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),l=(e,t,s,i)=>(J(e,t,"write to private field"),t.set(e,s),s),T=(e,t,s)=>(J(e,t,"access private method"),s);const F="https://player.twitch.tv",ut=/(?:www\.|go\.)?twitch\.tv\/(?:videos?\/|\?video=)(\d+)($|\?)/,ht=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,B={IDLE:"Idle",ENDED:"Ended"},k={PAUSE:2,PLAY:3,SEEK:4,SET_MUTED:10,SET_VOLUME:11};function st(e,t={}){const s={src:nt(e,t),frameborder:"0",width:"100%",height:"100%",allow:"accelerometer; fullscreen; autoplay; encrypted-media; picture-in-picture;",sandbox:"allow-modals allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox",scrolling:"no"};return t.config&&(s["data-config"]=JSON.stringify(t.config)),`
    <style>
      :host {
        display: inline-block;
        min-width: 300px;
        min-height: 150px;
        position: relative;
      }
      iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
      :host(:not([controls])) {
        pointer-events: none;
      }
    </style>
    <iframe${dt(s)}></iframe>
  `}function nt(e,t){var s;if(!e.src)return;const i=e.src.match(ut),d=e.src.match(ht),p={parent:(s=globalThis.location)==null?void 0:s.hostname,controls:e.controls===""?null:!1,autoplay:e.autoplay===""?null:!1,muted:e.muted,preload:e.preload,...t.config};if(i){const u=i[1];return`${F}/?video=v${u}&${G(p)}`}else if(d){const u=d[1];return`${F}/?channel=${u}&${G(p)}`}return""}var L,W,b,a,D,U,I,N,M,S,C,_,v,A,it;class P extends(globalThis.HTMLElement??class{}){constructor(){super(),c(this,v),H(this,"loadComplete",new Q),c(this,L),c(this,W),c(this,b),c(this,a,{}),c(this,D,0),c(this,U,!1),c(this,I,1),c(this,N,!this.autoplay),c(this,M,!1),c(this,S,0),c(this,C,null),c(this,_,async t=>{var s,i,d,p;if(!n(this,b).contentWindow)return;const{data:u,source:j}=t;if(j===n(this,b).contentWindow){if(u.namespace==="twitch-embed")await new Promise(E=>setTimeout(E,10)),u.eventName==="ready"?(this.dispatchEvent(new Event("loadcomplete")),this.loadComplete.resolve(),l(this,S,1),this.dispatchEvent(new Event("loadedmetadata"))):u.eventName==="seek"?(l(this,M,!0),this.dispatchEvent(new Event("seeking"))):u.eventName==="playing"?(n(this,M)&&(l(this,M,!1),this.dispatchEvent(new Event("seeked"))),l(this,S,3),this.dispatchEvent(new Event("playing"))):this.dispatchEvent(new Event(u.eventName));else if(u.namespace==="twitch-embed-player-proxy"&&u.eventName==="UPDATE_STATE"){const E=n(this,a).duration,$=n(this,a).currentTime,O=n(this,a).volume,g=n(this,a).muted,R=(i=(s=n(this,a).stats)==null?void 0:s.videoStats)==null?void 0:i.bufferSize;l(this,a,{...n(this,a),...u.params}),E!==n(this,a).duration&&this.dispatchEvent(new Event("durationchange")),$!==n(this,a).currentTime&&this.dispatchEvent(new Event("timeupdate")),(O!==n(this,a).volume||g!==n(this,a).muted)&&this.dispatchEvent(new Event("volumechange")),R!==((p=(d=n(this,a).stats)==null?void 0:d.videoStats)==null?void 0:p.bufferSize)&&this.dispatchEvent(new Event("progress"))}}}),T(this,v,it).call(this,"config")}get config(){return n(this,C)}set config(t){l(this,C,t)}async load(){if(n(this,L))return;this.shadowRoot||this.attachShadow({mode:"open"});const t=!n(this,W);if(n(this,W)&&(this.loadComplete=new Q),l(this,W,!0),await l(this,L,Promise.resolve()),l(this,L,null),l(this,S,0),this.dispatchEvent(new Event("emptied")),!this.src){this.shadowRoot.innerHTML="",globalThis.removeEventListener("message",n(this,_));return}this.dispatchEvent(new Event("loadstart"));let s=this.shadowRoot.querySelector("iframe");const i=ct(this.attributes);t&&s&&l(this,C,JSON.parse(s.getAttribute("data-config")||"{}")),(!(s!=null&&s.src)||s.src!==nt(i,this))&&(this.shadowRoot.innerHTML=st(i,this),s=this.shadowRoot.querySelector("iframe")),l(this,b,s),globalThis.addEventListener("message",n(this,_))}attributeChangedCallback(t,s,i){if(s!==i)switch(t){case"src":case"controls":{this.load();break}}}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",t)}get readyState(){return n(this,S)}get seeking(){return n(this,M)}get buffered(){var t,s;return ft(0,((s=(t=n(this,a).stats)==null?void 0:t.videoStats)==null?void 0:s.bufferSize)??0)}get paused(){return n(this,a).playback?n(this,a).playback===B.IDLE:n(this,N)}get ended(){return n(this,a).playback?n(this,a).playback===B.ENDED:!1}get duration(){return n(this,a).duration??NaN}get autoplay(){return this.hasAttribute("autoplay")}set autoplay(t){this.autoplay!=t&&this.toggleAttribute("autoplay",!!t)}get controls(){return this.hasAttribute("controls")}set controls(t){this.controls!=t&&this.toggleAttribute("controls",!!t)}get currentTime(){return n(this,a).currentTime?n(this,a).currentTime:n(this,D)}set currentTime(t){l(this,D,t),this.loadComplete.then(()=>{T(this,v,A).call(this,k.SEEK,t)})}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(t){this.toggleAttribute("muted",!!t)}get loop(){return this.hasAttribute("loop")}set loop(t){this.toggleAttribute("loop",!!t)}get muted(){return n(this,U)}set muted(t){l(this,U,t),this.loadComplete.then(()=>{T(this,v,A).call(this,k.SET_MUTED,t)})}get volume(){return n(this,I)}set volume(t){l(this,I,t),this.loadComplete.then(()=>{T(this,v,A).call(this,k.SET_VOLUME,t)})}get playsInline(){return this.hasAttribute("playsinline")}set playsInline(t){this.toggleAttribute("playsinline",!!t)}play(){l(this,N,!1),T(this,v,A).call(this,k.PLAY)}pause(){l(this,N,!0),T(this,v,A).call(this,k.PAUSE)}}L=new WeakMap,W=new WeakMap,b=new WeakMap,a=new WeakMap,D=new WeakMap,U=new WeakMap,I=new WeakMap,N=new WeakMap,M=new WeakMap,S=new WeakMap,C=new WeakMap,_=new WeakMap,v=new WeakSet,A=function(e,t){if(!n(this,b).contentWindow)return;const s={eventName:e,params:t,namespace:"twitch-embed-player-proxy"};n(this,b).contentWindow.postMessage(s,F)},it=function(e){if(Object.prototype.hasOwnProperty.call(this,e)){const t=this[e];delete this[e],this[e]=t}},H(P,"getTemplateHTML",st),H(P,"shadowRootOptions",{mode:"open"}),H(P,"observedAttributes",["autoplay","controls","loop","muted","playsinline","preload","src"]);function ct(e){let t={};for(let s of e)t[s.name]=s.value;return t}function dt(e){let t="";for(const s in e){const i=e[s];i===""?t+=` ${q(s)}`:t+=` ${q(s)}="${q(`${i}`)}"`}return t}function q(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#x60;")}function G(e){return String(new URLSearchParams(pt(e)))}function pt(e){let t={};for(let s in e){let i=e[s];i===!0||i===""?t[s]=!0:i===!1?t[s]=!1:i!=null&&(t[s]=i)}return t}class Q extends Promise{constructor(t=()=>{}){let s,i;super((d,p)=>{t(d,p),s=d,i=p}),this.resolve=s,this.reject=i}}function ft(e,t){return Array.isArray(e)?V(e):t==null||t===0?V([[0,0]]):V([[e,t]])}function V(e){return Object.defineProperties(e,{start:{value:t=>e[t][0]},end:{value:t=>e[t][1]}}),e}globalThis.customElements&&!globalThis.customElements.get("twitch-video")&&globalThis.customElements.define("twitch-video",P);var mt=P,vt=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),gt={className:"class",htmlFor:"for"};function ot(e){return e.toLowerCase()}function X(e){if(typeof e=="boolean")return e?"":void 0;if(typeof e!="function"&&!(typeof e=="object"&&e!==null))return e}function wt({react:e,tagName:t,elementClass:s,events:i,displayName:d,defaultProps:p,toAttributeName:u=ot,toAttributeValue:j=X}){const E=Number.parseInt(e.version)>=19,$=e.forwardRef((O,g)=>{var R,Y;const f=e.useRef(null),z=e.useRef(new Map),K={},Z={},w={},x={};for(const[o,r]of Object.entries(O)){if(vt.has(o)){w[o]=r;continue}const h=u(gt[o]??o);if(o in s.prototype&&!(o in(((R=globalThis.HTMLElement)==null?void 0:R.prototype)??{}))&&!((Y=s.observedAttributes)!=null&&Y.some(y=>y===h))){x[o]=r;continue}if(o.startsWith("on")){K[o]=r;continue}const m=j(r);if(h&&m!=null&&(Z[h]=String(m),E||(w[h]=m)),h&&E){const y=X(r);m!==y?w[h]=m:w[h]=r}}if(typeof window<"u"){for(const o in K){const r=K[o],h=o.endsWith("Capture"),m=((i==null?void 0:i[o])??o.slice(2).toLowerCase()).slice(0,h?-7:void 0);e.useLayoutEffect(()=>{const y=f==null?void 0:f.current;if(!(!y||typeof r!="function"))return y.addEventListener(m,r,h),()=>{y.removeEventListener(m,r,h)}},[f==null?void 0:f.current,r])}e.useLayoutEffect(()=>{if(f.current===null)return;const o=new Map;for(const r in x)tt(f.current,r,x[r]),z.current.delete(r),o.set(r,x[r]);for(const[r,h]of z.current)tt(f.current,r,void 0);z.current=o})}if(typeof window>"u"&&s!=null&&s.getTemplateHTML&&s!=null&&s.shadowRootOptions){const{mode:o,delegatesFocus:r}=s.shadowRootOptions,h=e.createElement("template",{shadowrootmode:o,shadowrootdelegatesfocus:r,dangerouslySetInnerHTML:{__html:s.getTemplateHTML(Z,O)}});w.children=[h,w.children]}return e.createElement(t,{...p,...w,ref:e.useCallback(o=>{f.current=o,typeof g=="function"?g(o):g!==null&&(g.current=o)},[g])})});return $.displayName=d??s.name,$}function tt(e,t,s){var i;e[t]=s,s==null&&t in(((i=globalThis.HTMLElement)==null?void 0:i.prototype)??{})&&e.removeAttribute(t)}var bt=wt({react:at,tagName:"twitch-video",elementClass:mt,toAttributeName(e){return e==="muted"?"":e==="defaultMuted"?"muted":ot(e)}});export{bt as default};
