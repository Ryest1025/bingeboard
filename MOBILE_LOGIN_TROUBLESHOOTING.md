# 🔧 Mobile Social Login Troubleshooting Guide

## 🎯 Quick Diagnosis

### Step 1: Start Development Server
```bash
npm run dev
```

### Step 2: Test Current Setup
1. Open browser to: `http://localhost:5173`
2. Navigate to mobile app page: `http://localhost:5173/mobile-app`
3. Open debug tool: `http://localhost:5173/mobile-social-debug-updated.html`

## 🔍 Common Issues & Solutions

### Issue 1: Facebook Login Not Working
**Symptoms:** Facebook login button does nothing or shows error
**Cause:** Facebook requires HTTPS for social login
**Solution:**
1. Generate SSL certificates:
   ```bash
   # Option A: Use batch file (Windows)
   generate-ssl.bat
   
   # Option B: Use Git Bash
   bash generate-ssl.sh
   
   # Option C: Manual OpenSSL commands
   openssl genrsa -out localhost.key 2048
   openssl req -new -key localhost.key -out localhost.csr -config localhost.conf
   openssl x509 -req -in localhost.csr -signkey localhost.key -out localhost.crt -days 365 -extensions v3_req -extfile localhost.conf
   ```

2. Enable HTTPS in `.env.local`:
   ```bash
   HTTPS=true
   ```

3. Restart dev server:
   ```bash
   npm run dev
   ```

4. Access via: `https://localhost:5173`

### Issue 2: Google Login Working but Facebook Failing
**Cause:** Google works on HTTP (localhost only), Facebook requires HTTPS
**Solution:** Enable HTTPS (see Issue 1)

### Issue 3: Firebase Configuration Issues
**Symptoms:** "Firebase not configured" errors
**Cause:** `.env.local` has placeholder values
**Solution:**
1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Create/select your project
3. Go to Project Settings > General > Your apps
4. Copy configuration values to `.env.local`:
   ```bash
   VITE_FIREBASE_API_KEY=your_actual_api_key
   VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
   VITE_FIREBASE_PROJECT_ID=your-project-id
   # ... etc
   ```

### Issue 4: Mobile Detection Not Working
**Symptoms:** Mobile features not activating on mobile devices
**Cause:** User agent detection issues
**Current Detection Logic:**
```javascript
const isMobile = () => /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
```

**Enhanced Detection (if needed):**
```javascript
const isMobile = () => {
  return /iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
         (window.innerWidth <= 768 && 'ontouchstart' in window);
};
```

### Issue 5: Redirect Flow Not Working
**Symptoms:** After social login redirect, user not logged in
**Cause:** `getRedirectResult` not properly handling response
**Check:** Look at browser console for errors during redirect

## 🧪 Testing Checklist

### Before Testing:
- [ ] Development server running (`npm run dev`)
- [ ] Firebase configured in `.env.local`
- [ ] For Facebook: HTTPS enabled and certificates generated

### Test Mobile Social Login:
1. [ ] Open browser developer tools
2. [ ] Toggle device emulation (mobile view)
3. [ ] Navigate to `/mobile-app`
4. [ ] Try Google login (should work on HTTP)
5. [ ] Try Facebook login (requires HTTPS)
6. [ ] Check console for errors
7. [ ] Verify redirect flow completes

### Debug Tool Verification:
1. [ ] Open debug tool: `/mobile-social-debug-updated.html`
2. [ ] Check environment detection
3. [ ] Verify mobile detection
4. [ ] Test HTTPS status
5. [ ] Review Firebase connection
6. [ ] Export debug log if issues persist

## 🚀 Expected Behavior

### On Mobile (or mobile emulation):
- Google login: `signInWithRedirect` → redirect to Google → return to app
- Facebook login: `signInWithRedirect` → redirect to Facebook → return to app
- After redirect: `getRedirectResult` processes the response

### On Desktop:
- Google login: `signInWithPopup` → popup window → immediate response
- Facebook login: `signInWithPopup` → popup window → immediate response

## 🔗 Useful Links

- [Firebase Auth Documentation](https://firebase.google.com/docs/auth/web/start)
- [Firebase Console](https://console.firebase.google.com/)
- [OpenSSL for Windows](https://wiki.openssl.org/index.php/Binaries)
- [Chrome DevTools Device Mode](https://developer.chrome.com/docs/devtools/device-mode/)

## 🆘 Still Having Issues?

1. Run the debug tool and export the log
2. Check browser console for specific error messages
3. Verify Firebase project settings (authorized domains, etc.)
4. Test with actual mobile device vs. browser emulation
5. Check network tab for failed requests during login flow

---
*Generated by BingeBoard Mobile Social Login Debug System*
